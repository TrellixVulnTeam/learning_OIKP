import pandas as pd
from pyproj import Proj,transform

# UTM-K
proj_UTMK = Proj(init='epsg:5178')
# WGS1984
proj_WGS84 = Proj(init='epsg:4326')


jsfile= {
	"type": "FeatureCollection",
	"id": "API_0704",
	"errMsg": "Success",
	"errCd": 0,
	"trId": "axBP_API_0704_1628083770863",
	"features": [
		{
			"type": "Feature",
			"geometry": {
				"type": "MultiPolygon",
				"coordinates": [
					[
						[
							[
								961890.8077449799,
								1953736.581029892
							],
							[
								961893.1130199432,
								1953750.4278202057
							],
							[
								961917.7972164154,
								1953742.0900211334
							],
							[
								961890.8077449799,
								1953736.581029892
							]
						]
					],
					[
						[
							[
								960838.6353168488,
								1954194.136220932
							],
							[
								960940.9321193695,
								1954162.593820572
							],
							[
								961425.0363178253,
								1954074.2266216278
							],
							[
								961541.5372180939,
								1954011.859319687
							],
							[
								961541.7604198456,
								1954011.7301197052
							],
							[
								961543.1815166473,
								1954010.9038219452
							],
							[
								961540.5010166168,
								1953875.0257205963
							],
							[
								961527.3246173859,
								1953838.047422409
							],
							[
								961525.4454174042,
								1953834.1209201813
							],
							[
								961511.738817215,
								1953806.0482196808
							],
							[
								961504.4108982086,
								1953678.9789562225
							],
							[
								961562.5580196381,
								1953669.579919815
							],
							[
								961890.8077449799,
								1953736.581029892
							],
							[
								961826.7781200409,
								1953351.982919693
							],
							[
								961767.2971172333,
								1953113.9021205902
							],
							[
								961597.5761165619,
								1953098.5136203766
							],
							[
								960938.335515976,
								1952978.4596691132
							],
							[
								960938.9459209442,
								1952987.1278743744
							],
							[
								960941.5073223114,
								1953023.5036907196
							],
							[
								960943.1736850739,
								1953047.1710681915
							],
							[
								960943.2158565521,
								1953048.1265277863
							],
							[
								960949.2551212311,
								1953185.744272232
							],
							[
								960950.4388599396,
								1953212.7208538055
							],
							[
								960950.2780971527,
								1953213.3538532257
							],
							[
								960941.402059555,
								1953248.3026485443
							],
							[
								960901.9246997833,
								1953321.4300670624
							],
							[
								960898.8862552643,
								1953327.0578708649
							],
							[
								960670.2702693939,
								1953728.7608966827
							],
							[
								960643.8530521393,
								1953908.143316269
							],
							[
								960702.7239055634,
								1953967.0526371002
							],
							[
								960838.6353168488,
								1954194.136220932
							]
						]
					]
				]
			},
			"properties": {
				"adm_cd": "1106084",
				"adm_nm": "서울특별시 동대문구 전농2동",
				"y": "1953580",
				"x": "961238"
			}
		}
	]
}


def getXY( df):
    x1, y1 = df.x, df.y
    # UTM-K -> WGS84 만들기
    x2, y2 = transform(proj_UTMK, proj_WGS84, x1, y1)
    return f"{x2},{y2}"

json = jsfile['features'][0]['geometry']['coordinates']
if jsfile['features'][0]['geometry']['type'] == "MultiPolygon":
    for i in range(len(json)):
        df = pd.DataFrame(json[i][0])
        df.columns = ['x','y']
        df['coor_xy'] = df.apply(getXY,axis=1)
        df.drop(axis=1,columns=['x','y'],inplace=True)
        df['x'] = df['coor_xy'].str.split(',').str[0]
        df['y'] = df['coor_xy'].str.split(',').str[1]
        df.drop(axis=1,columns='coor_xy',inplace=True)
        df['x'] = df['x'].astype('float64')
        df['y'] = df['y'].astype('float64')
        json[i][0] = list(map(list,df[['x','y']].values))
print(json)